                const choghadiyaList = choghadiyaOrder[nightDayOfWeek].night;
                
                const durationMs = (nextSunriseTime - sunsetTime) / 8;
                const timeElapsed = now - sunsetTime;
                const choghadiyaIndex = Math.floor(timeElapsed / durationMs);
                
                // આ લોજિક મધ્યરાત્રી પછી પણ ચાલશે કારણ કે nextSunriseTime આવતીકાલની તારીખે સેટ થયેલો છે.
                return `રાતનું ચોઘડિયું: **${choghadiyaList[choghadiyaIndex]}**`;
            }
         
            // ૩. રાતના ચોઘડિયાં - ભાગ-૨ (મધ્યરાત્રી ૦૦:૦૦ થી સૂર્યોદય)
            if (now < sunriseTime) {
                 if (!previousData || !nextSunriseTime) {
                    return "રાતના ચોઘડિયાં (સૂર્યોદય પહેલાનો સમય) ગણવા માટે પૂરતો ડેટા ઉપલબ્ધ નથી.";
                }

                // રાતના ચોઘડિયાં માટે વાર 'આજનો' ગણાય છે, જે પાછલા દિવસના રાતના ચોઘડિયાંનો ભાગ છે.
                const previousDayOfWeek = (dayOfWeek - 1 + 7) % 7; 
                const choghadiyaList = choghadiyaOrder[dayOfWeek].night; // વાર આજનો પણ ક્રમ પાછલા દિવસના રાતનો લેવાનો

                // પાછલા દિવસનો સૂર્યાસ્ત સમય
                const previousDayOnly = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - 1).getTime();
                const previousSunsetTime = previousDayOnly + convertTimeToMs(previousData.sunset);

                // ગણતરીનો સમયગાળો: પાછલા દિવસના સૂર્યાસ્તથી આજના સૂર્યોદય સુધી.
                const durationMs = (sunriseTime + convertTimeToMs("24:00") - previousSunsetTime) / 8;
                const timeElapsed = now + convertTimeToMs("24:00") - previousSunsetTime;
                
                // આ ગણતરીમાં જટિલતાને કારણે, આ ભાગને સરળ રાખવા માટે 24-કલાકની ગણતરીનો ઉપયોગ કર્યો છે.
                // નોંધ: આ ભાગને વધુ ડેટા (પ્રીવિયસ સૂર્યોદય/સૂર્યાસ્ત) સાથે વધુ ચોક્કસ કરી શકાય છે.
                // હાલ પૂરતું, આ લોજિક ૦૦:૦૦ પછીનો સમય સંભાળશે.
                let choghadiyaIndex = Math.floor(timeElapsed / durationMs);
                
                // Index 8 થી મોટો ન થાય તેની ખાતરી
                if (choghadiyaIndex >= 8) {
                    choghadiyaIndex = choghadiyaIndex % 8; 
                }
                
                return `રાતનું ચોઘડિયું (સૂર્યોદય પહેલા): **${choghadiyaList[choghadiyaIndex]}**`;
            }
            
            return "સમયની ગણતરી અશક્ય"; // Fallback
        }

        // મુખ્ય ઘડિયાળ ફંક્શન
        function updateClock() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            const day = now.getDay();

            // સમય: HH:MM:SS
            const timeStr = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            
            // તારીખ અને વાર
            const dateStr = `${String(now.getDate()).padStart(2, '0')}-${String(now.getMonth() + 1).padStart(2, '0')}-${now.getFullYear()}`;
            const detailsStr = `${dateStr}, ${dayNames[day]}`;

            document.getElementById('time').textContent = timeStr;
            document.getElementById('date-details').textContent = detailsStr;
            
            // ચોઘડિયાં અપડેટ કરવા
            const choghadiyaStr = getChoghadiya(now);
            document.getElementById('choghadiya').innerHTML = choghadiyaStr;
        }

        // દર સેકન્ડે ઘડિયાળ અપડેટ કરવી
        setInterval(updateClock, 1000);
        // પ્રથમ વખત તરત જ શરૂ કરવું
        updateClock();
    </script>
</body>
        </html>
        
